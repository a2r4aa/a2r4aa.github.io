<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">

    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--icon-->

    <link rel="shortcut icon" type='image/x-icon' href="/favicon.ico">


    <!-- meta -->


<title>Make A Certification For Nginx | </title>


    <meta name="keywords" content="Nginx,Certification">




    <!-- OpenGraph -->
 
    <meta name="description" content="I bought a domin. It is cheap for using one year. This draft will give you an example that how to config SSL for your website.Before doing this, you need to make sure that kmaa.top directs your ip of">
<meta property="og:type" content="article">
<meta property="og:title" content="Make A Certification For Nginx">
<meta property="og:url" content="https://a2r4aa.github.io/Make-A-Certification-For-Nginx/index.html">
<meta property="og:site_name">
<meta property="og:description" content="I bought a domin. It is cheap for using one year. This draft will give you an example that how to config SSL for your website.Before doing this, you need to make sure that kmaa.top directs your ip of">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://a2r4aa.github.io/pictures/cloudflare.png">
<meta property="article:published_time" content="2019-10-15T02:47:12.000Z">
<meta property="article:modified_time" content="2020-11-06T01:00:39.847Z">
<meta property="article:author" content="E">
<meta property="article:tag" content="NGINX">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://a2r4aa.github.io/pictures/cloudflare.png">


    
<link rel="stylesheet" href="/css/style/main.css">
 


    
<link rel="stylesheet" href="/css/style/dark.css">

    
<script src="/js/darkmode.js"></script>



    
    
        <link rel="stylesheet" id="hl-default-theme" href="/css/highlight/default.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')===-1)this.media='all'">
        
            <link rel="stylesheet" id="hl-dark-theme" href="/css/highlight/dark.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')!==-1)this.media='all'">
        
    

    
    

     

    <!-- custom head -->

    
        <meta name="msvalidate.01" charset="utf-8" content="4C4B868D728A3628124107F6E39C691C" /> <script async src="//pagead2.googlesyndication.com/ pagead/js/adsbygoogle.js"></script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "pub-3492247823569079", enable_page_level_ads: true }); </script>  
    
        <script data-isso="https://comments.ukr.monster/" data-isso-id="thread-id" data-isso-css="true" data-isso-lang="en" data-isso-reply-to-self="false" data-isso-require-author="true" data-isso-require-email="false" data-isso-max-comments-top="10" data-isso-max-comments-nested="5" data-isso-reveal-on-click="5" data-isso-avatar="true" data-isso-avatar-bg="#f0f0f0" data-isso-avatar-fg="#9abf88 #5698c4 #e279a3 #9163b6 ..." data-isso-vote="true" data-isso-vote-levels="" data-isso-feed="false" src="https://comments.kmaa.top/js/embed.min.js"></script> 
    

<meta name="generator" content="Hexo 5.2.0"></head>

    <body>
        <div id="app">
            <header class="header">
    <div class="header__left">
        <a href="/" class="button">
            <span class="logo__text">
                
            </span>
        </a>
    </div>
    <div class="header__right">
        
            <div class="navbar__menus">
                
                    <a href="/" class="navbar-menu button">
                        首页
                    </a>
                
                    <a href="/tags/" class="navbar-menu button">
                        标签
                    </a>
                
                    <a href="/archives/" class="navbar-menu button">
                        归档
                    </a>
                
            </div>
        
        
        
    <a href="/search/" id="btn-search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24" fill="currentColor" stroke="currentColor" stroke-width="32"><path d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z"></path></svg>
    </a>


        
        
    <a href="javaScript:void(0);" id="btn-toggle-dark">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </a>


         
    <a href="#" class="button" id="b2t" aria-label="Back to Top" title="Back to Top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M233.376 722.752L278.624 768 512 534.624 745.376 768l45.248-45.248L512 444.128zM192 352h640V288H192z" fill="currentColor"></path>
        </svg>
    </a>


        
            <a class="dropdown-icon button" id="btn-dropdown">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width='24' height='24' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round">
                    <path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path>
                </svg>
            </a>
            <div class="dropdown-menus" id="dropdown-menus">
                
                    <a href="/" class="dropdown-menu button">
                        首页
                    </a>
                
                    <a href="/tags/" class="dropdown-menu button">
                        标签
                    </a>
                
                    <a href="/archives/" class="dropdown-menu button">
                        归档
                    </a>
                
            </div>
        
    </div>
</header>


            <main class="main">
    

<div class="post-title">
    <h1 class="post-title__text">
        Make A Certification For Nginx
    </h1>
    <div class="post-title__meta">
        <a href="/archives/2019/10/" class="post-meta__date button">
    2019-10-15
</a>
        
 
        
    
    


 

 
    </div>
</div>


    <aside class="post-side">
        <div class="post-side__toc">
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li></ol>
        </div>
    </aside>
    <a class="btn-toc button" id="btn-toc">
        <svg viewBox="0 0 1024 1024" width="32" height="32" xmlns="http://www.w3.org/2000/svg">
            <path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="currentColor"></path>
        </svg>
    </a>
    <div class="toc-menus" id="toc-menus">
        <div class="toc-title">Article Directory</div>
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li></ol>
    </div>


<article class="post content-card">
    <div class="post__header">
    <div class="post__expire" id="post-expired-notify">
        <p>
            This article was last updated on &lt;span id=&#34;expire-date&#34;&gt;&lt;/span&gt; days ago, the information described in the article may be outdated.
        </p>
    </div>
    <script>
        (() => {
            var update = Date.parse("2020-11-06"),
                date = new Date(),
                now = date.getTime(),
                expire = now - update,
                expire_days = Math.floor(expire/(24*3600*1000));
            if (expire_days >= 120) {
                document.querySelectorAll('#expire-date')[0].innerHTML = expire_days;
                document.querySelectorAll('#post-expired-notify')[0].style.display = 'block';
            }
        })();
    </script>
</div>
    <div class="post__content">
        <p>I bought a domin. It is cheap for using one year. This draft will give you an example that how to config SSL for your website.<br>Before doing this, you need to make sure that kmaa.top directs your ip of the server. Here is my cloudflare. Attention! Let the cloud keep grey before you fininsh the fllowing steps.</p>
<p><img src="/pictures/cloudflare.png"></p>
<p>Open your terminal and do it one by one.<br>You can generate <strong>kmaa.top.conf</strong> from <a target="_blank" rel="noopener" href="https://nginxconfig.io/">here</a><a id="more"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">apt install nginx</span><br><span class="line">apt install certbot</span><br><span class="line">apt install python-certbot-nginx</span><br><span class="line">certbot --nginx -d kmaa.top --register-unsafely-without-email</span><br><span class="line"></span><br><span class="line"># if you don&#39;t need nginx,just run</span><br><span class="line">certbot certonly -d kmaa.top --register-unsafely-without-email</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">touch &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;kmaa.top.conf</span><br><span class="line">vi &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;kmaa.top.conf</span><br><span class="line">**write below into kmaa.top.conf**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  root &#x2F;var&#x2F;www&#x2F;write&#x2F;public;</span><br><span class="line">  index index.html index.htm;</span><br><span class="line">  server_name kmaa.top;</span><br><span class="line">  listen  443 ssl;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate       &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;fullchain.pem;</span><br><span class="line">  ssl_certificate_key   &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;privkey.pem;</span><br><span class="line">  ssl_protocols         TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">    autoindex on;</span><br><span class="line">    try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	# additional config</span><br><span class="line">	include nginxconfig.io&#x2F;general.conf;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"># subdomains redirect</span><br><span class="line">server &#123;</span><br><span class="line">	listen 443 ssl http2;</span><br><span class="line">	listen [::]:443 ssl http2;</span><br><span class="line"></span><br><span class="line">	server_name *.kmaa.top;</span><br><span class="line"></span><br><span class="line">	# SSL</span><br><span class="line">	ssl_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;fullchain.pem;</span><br><span class="line">	ssl_certificate_key &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;privkey.pem;</span><br><span class="line">	ssl_trusted_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;chain.pem;</span><br><span class="line"></span><br><span class="line">	return 301 https:&#x2F;&#x2F;kmaa.top$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># HTTP redirect</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	listen [::]:80;</span><br><span class="line"></span><br><span class="line">	server_name .kmaa.top;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	location &#x2F; &#123;</span><br><span class="line">		return 301 https:&#x2F;&#x2F;kmaa.top$request_uri;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir &#x2F;etc&#x2F;nginx&#x2F;nginxconfig.io</span><br><span class="line">touch &#x2F;etc&#x2F;nginx&#x2F;nginxconfig.io&#x2F;general.conf</span><br><span class="line">vi &#x2F;etc&#x2F;nginx&#x2F;nginxconfig.io&#x2F;general.conf</span><br><span class="line"></span><br><span class="line"># start</span><br><span class="line"># favicon.ico</span><br><span class="line">location &#x3D; &#x2F;favicon.ico &#123;</span><br><span class="line">	log_not_found off;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># robots.txt</span><br><span class="line">location &#x3D; &#x2F;robots.txt &#123;</span><br><span class="line">	log_not_found off;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># assets, media</span><br><span class="line">location ~* \.(?:css(\.map)?|js(\.map)?|jpe?g|png|gif|ico|cur|heic|webp|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv)$ &#123;</span><br><span class="line">	expires 7d;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># svg, fonts</span><br><span class="line">location ~* \.(?:svgz?|ttf|ttc|otf|eot|woff2?)$ &#123;</span><br><span class="line">	add_header Access-Control-Allow-Origin &quot;*&quot;;</span><br><span class="line">	expires 7d;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># gzip</span><br><span class="line">gzip on;</span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_proxied any;</span><br><span class="line">gzip_comp_level 6;</span><br><span class="line">gzip_types text&#x2F;plain text&#x2F;css text&#x2F;xml application&#x2F;json application&#x2F;javascript application&#x2F;rss+xml application&#x2F;atom+xml image&#x2F;svg+xml;</span><br><span class="line"># end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># vi &#x2F;etc&#x2F;nginx&#x2F;nginx.conf </span><br><span class="line">include &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;*.conf;</span><br><span class="line">include &#x2F;var&#x2F;www&#x2F;*.conf;</span><br><span class="line"># We don&#39;t need default anymore. Remove it or add a &quot;#&quot; before it.</span><br><span class="line">#    include &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;*;</span><br></pre></td></tr></table></figure>


<p>Version of this certificate in the future, simply run certbot again with the “certonly” option. To non-interactively renew <em>all</em> of your certificates, run “certbot renew”</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04">How To Secure Nginx with Let’s Encrypt on Ubuntu 16.04</a></p>

    </div>
    
    <div class="post__license">
        <p>
            <strong>Author: </strong>E
        </p>
        <p>
            <strong>
                Permalink: 
            </strong>
            <a href="https://a2r4aa.github.io/Make-A-Certification-For-Nginx/">https://a2r4aa.github.io/Make-A-Certification-For-Nginx/</a>
        </p>
        
    </div>
 
    <div class="post-footer__meta">
    <p>
        updated at 2020-11-06
    </p>
</div> 
    <div class="post-meta__cats">
    
    
        <a href="/tags/NGINX/" class="post-tags__link button"># NGINX</a>
    
</div> 
</article>


    <div class="nav">
        <div class="nav__prev">
            
                <a href="/How-to-move-Unturned-Server-data/" class="nav__link">
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg>
                    </div>
                    <div>
                        <div class="nav__label">
                            Previous Post
                        </div>
                        <div class="nav__title">
                            How to move Unturned Server data
                        </div>
                    </div>
                </a>
            
        </div>
        <div class="nav__next">
            
                <a href="/How%20to%20reinstall%20Hexo/" class="nav__link">
                    <div>
                        <div class="nav__label">
                            Next Post
                        </div>
                        <div class="nav__title">
                            How to reinstall Hexo
                        </div>
                    </div>
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg>
                    </div>
                </a>
            
        </div>
    </div>








<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ads_comment -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3492247823569079"
     data-ad-slot="2999761721"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>









</main>

            <footer class="footer">
    


    
     
 

 
    
        
        <p class="footer-copyright">
            Copyright © 2019&nbsp;-&nbsp;2020 <a href="/"></a>
        </p>
    
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p>
</footer>

        </div>
         

 
    <script>
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-152049817-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
 

 

 

  



 


    
 

 

 

 




    </body>
</html>
